<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Editar Producto - Tienda Musical</title>
</head>
<body>
    <h1>✏️ Editar producto</h1>

    <form action="{{ url_for('editar_producto', id_producto=producto['id_producto']) }}" method="POST">
        <label for="id_categoria">Categoría:</label><br>
        <select name="id_categoria" id="id_categoria" required>
            {% for categoria in categorias %}
                <option value="{{ categoria['id_categoria'] }}"
                    {% if categoria['id_categoria'] == producto['id_subcategoria'] %}selected{% endif %}>
                    {{ categoria['nombre_categoria'] }}
                </option>
            {% endfor %}
        </select><br><br>

        <label for="id_subcategoria">Subcategoría:</label><br>
        <select name="id_subcategoria" id="id_subcategoria" required>
            {% for subcategoria in subcategorias %}
                <option value="{{ subcategoria['id_subcategoria'] }}"
                    {% if subcategoria['id_subcategoria'] == producto['id_subcategoria'] %}selected{% endif %}>
                    {{ subcategoria['nombre_subcategoria'] }}
                </option>
            {% endfor %}
        </select><br><br>

        <label for="nombre">Nombre:</label><br>
        <input type="text" name="nombre" id="nombre" value="{{ producto['nombre'] }}" required><br><br>

        <label for="referencia">Referencia:</label><br>
        <input type="text" name="referencia" id="referencia" value="{{ producto['referencia'] }}" required><br><br>

        <label for="descripcion">Descripción:</label><br>
        <textarea name="descripcion" id="descripcion" rows="4">{{ producto['descripcion'] }}</textarea><br><br>

        <label for="precio">Precio:</label><br>
        <input type="number" name="precio" id="precio" step="0.01" value="{{ producto['precio'] }}" required><br><br>

        <label for="cantidad">Cantidad:</label><br>
        <input type="number" name="cantidad" id="cantidad" value="{{ producto['cantidad'] }}" required><br><br>

        <label for="img_url">URL de la imagen:</label><br>
        <input type="text" name="img_url" id="img_url" value="{{ producto['img_url'] }}"><br><br>

        <button type="submit">Guardar cambios</button>
    </form>

    <p><a href="{{ url_for('ver_productos') }}">⬅️ Volver a la lista de productos</a></p>
</body>
</html>
